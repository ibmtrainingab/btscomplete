<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Update Bug</title>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="styles.css">

</head>
<script type="text/javascript">
	function updateBug() {
		function success(response) {
			console.log(response);
			return response.json();
		}
		function errorHandler(error) {
			console.log(error);
		}
		//Form Validation
		//updateBug is the id of updateBug form
		//const updateBug = document.getElementById('updateBug');
		//if (!updateBug.checkValidity()) {
		//	alert('form is invalid');
			//return;
	//	}

		let id = document.getElementById('bugId').value;

		

		const promise = fetch(('/bug/'+ id), {
			method : 'PUT',
			headers : {
				'Content-Type' : 'application/json'
			},
			body : JSON.stringify({
				//id:document.getElementById('bugId').value,
				status : document.getElementById('Status').value,
				priority : document.getElementById('Priority').value,

			})
		});
		promise.then(success);
	    promise.then(function (data) {
	        console.log(data);
	    })
	    promise.catch(errorHandler);
	
	}
</script>
<body>
	<div class="nav">
		<input type="checkbox" id="nav-check">
		<div class="nav-header">
			<div class="nav-title">BugTrackingSystem</div>
		</div>
		<div class="nav-btn">
			<label for="nav-check"> <span></span> <span></span> <span></span>
			</label>
		</div>

		<div class="nav-links">
			<a href="home.html">Home</a> <a href="createBug.html">Create</a> <a
				href="updateBug.html">Update</a> <a href="search.html">Search</a> <a
				href="contact.html">Contact</a>
		</div>
	</div>



	<h1>Update Bug</h1>
	<form>
		<div class="row">
			<div class="col-5">
				<label class="lab" for="bid">Bug ID</label>
			</div>
			<div class="col-6">
				<input type="text" id="bugId" name="bug_id"
					placeholder="Enter bug ID..">
			</div>
		</div>
		<div class="row">
			<div class="col-5">
				<label for="bugStatus">Enter Bug status :</label>
			</div>
			<div class="col-6">
				<select id="Status">
					<option value="NEW">NEW</option>
					<option value="ASSIGNED">ASSIGNED</option>
					<option value="OPEN">OPEN</option>
					<option value="CLOSED">CLOSED</option>
					<option value="VERIFIED">VERIFIED</option>
					<option value="DEFERRED">DEFERRED</option>
					<option value="NOT_A_BUG">NOT_A_BUG</option>
				</select>
			</div>
		</div>
		<div class="row">
			<div class="col-5">
				<label for="priority">Priority : </label>
			</div>
			<div class="col-6">
				<select id="Priority">
					<option value="HIGH">HIGH</option>
					<option value="MEDIUM">MEDIUM</option>
					<option value="LOW">LOW</option>
				</select>

			</div>
		</div>


	</form>
	
		<div class="col-6">
			<input type="submit" onclick="updateBug()" value="Submit">
		</div>

</body>
<br>
<hr class="rounded">
<br>
</body>
</html>